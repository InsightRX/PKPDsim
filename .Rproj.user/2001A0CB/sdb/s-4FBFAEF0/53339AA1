{
    "contents" : "#' Simulate ODE and create a Shiny app\n#'\n#' Creates a VPC plot from observed and simulation data\n#' @param ode function describing the ODE system\n#' @param parameters\n#' @param omega vector describing the lower-diagonal of the between-subject variability matrix\n#' @param omega_type exponential or normal\n#' @param n_ind number of individuals to simulate\n#' @param regimen a regimen object created using the regimen() function\n#' @param A_init vector with the initial state of the ODE system\n#' @param step_size the step size between the observations (NOT the step size of the differential equation solver)\n#' @param tmax maximum simulation time, if not specified will pick the end of the regimen as maximum\n#' @param output vector specifying which compartment numbers to output\n#' @return a list containing calculated VPC information, and a ggplot2 object\n#' @export\n#' @seealso \\link{sim_ode}\n#' @examples\n#'\n#'library(PKPDsim)\n#'p <- list(CL = 38.48,\n#'          V  = 7.4,\n#'          Q2 = 7.844,\n#'          V2 = 5.19,\n#'          Q3 = 9.324,\n#'          V3 = 111)\n#'\n#'omega <- c(0.3,       # IIV CL\n#'           0.1, 0.3)  # IIV V\n#'\n#'sim_ode_shiny(ode = pk_3cmt_iv,\n#'              omega = omega,\n#'              par = p)\n\nsim_ode_shiny <- function(name = \"\",\n                          ode = function() {} ,\n                          parameters = list(),\n                          omega = NULL,\n                          omega_type = \"exponential\",\n                          n_ind = 1,\n                          regimen = NULL,\n                          A_init = NULL,\n                          step_size = 1,\n                          tmax = NULL,\n                          shiny_folder = \"~/shiny-pkpd\") {\n  if(!file.exists(shiny_folder)) {\n    dir.create(shiny_folder)\n  } else {\n    unlink(paste0(shiny_folder,\"/\", c(\"ui.R\", \"server.R\", \"ode.rds\", \"parameters.rds\", \"misc.rds\", \"regimen.rds\")))\n  }\n  writeLines(ui_text, paste0(shiny_folder, \"/ui.R\"))\n  writeLines(paste0('setwd(\"',shiny_folder,'\")', server_text), paste0(shiny_folder, \"/server.R\"))\n  saveRDS(ode, file=paste0(shiny_folder, \"/ode.rds\"))\n  saveRDS(parameters, file=paste0(shiny_folder, \"/parameters.rds\"))\n  saveRDS(regimen, file=paste0(shiny_folder, \"/regimen.rds\"))\n  saveRDS(list(omega = omega, omega_type = omega_type, n_ind = n_ind, A_init = A_init, step_size = step_size, tmax = tmax),\n          paste0(shiny_folder, \"/misc.rds\"))\n  runApp(shiny_folder)\n}\n",
    "created" : 1425925079778.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2728556665",
    "id" : "53339AA1",
    "lastKnownWriteTime" : 1425928753,
    "path" : "~/git/PKPDsim/R/sim_ode_shiny.R",
    "project_path" : "R/sim_ode_shiny.R",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "type" : "r_source"
}